(this["webpackJsonplibrary-occupancy-frontend"]=this["webpackJsonplibrary-occupancy-frontend"]||[]).push([[0],{11:function(e,a,t){},13:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(5),i=t.n(r),l=(t(11),t(2));function s(){return c.a.createElement("section",{className:"hero has-background-link has-text-centered"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("h1",{className:"title has-text-white-bis"},"University of Florida Smathers Libraries"),c.a.createElement("h2",{className:"subtitle has-text-white-bis"},"Occupancy Counts by Location")))}var o={all:{name:"All Facilities",location_id:"all",prefix:null},UFL001:{name:"Smathers Library - Main Entrance",location_id:"UFL001",prefix:"uf-lib"},UFL002:{name:"Library West",location_id:"UFL002",prefix:"uf-lib"},UFL003:{name:"Marston Science Library",location_id:"UFL003",prefix:"uf-lib"},UFL004:{name:"Education Library",location_id:"UFL004",prefix:"uf-lib"},UFL005:{name:"Architecture and Fine Arts Library",location_id:"UFL005",prefix:"uf-lib"},UFL006:{name:"Health Science Center Library",location_id:"UFL006",prefix:"uf-lib"},UFLGRR:{name:"Smathers Library - Reading Room",location_id:"UFLGRR",prefix:"uf-lib"},UFLLAT:{name:"Smathers Library - Latin American and Caribbean Collections",location_id:"UFLLAT",prefix:"uf-lib"},UFLPCM:{name:"Smathers Library - Panama Canal",location_id:"UFLPCM",prefix:"uf-lib"},UFLRM1:{name:"Smathers Library - Room 100",location_id:"UFLRM1",prefix:"uf-lib"}};function m(e){var a=e.facility,t="#".concat(a.location_id);return c.a.createElement("li",{className:"is-size-7 is-uppercase"},c.a.createElement("a",{className:e.getIsActive(a.location_id),onClick:e.changeMenuView(a.location_id),href:t},a.name))}function u(e){var a=function(a){return function(t){t.preventDefault(),e.setActiveLocation(a)}},t=function(a){return a===e.location_id?"is-active":null};return c.a.createElement("aside",{className:"menu"},c.a.createElement("p",{className:"menu-label"},c.a.createElement("span",{class:"icon"},c.a.createElement("i",{class:"fas fa-home"}),"\xa0"),"All"),c.a.createElement("ul",{className:"menu-list"},c.a.createElement(m,{facility:o.all,changeMenuView:a,getIsActive:t})),c.a.createElement("p",{className:"menu-label"},c.a.createElement("span",{class:"icon"},c.a.createElement("i",{class:"fas fa-book"}),"\xa0"),"Smathers Libraries"),c.a.createElement("ul",{className:"menu-list"},c.a.createElement(m,{facility:o.UFL002,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFL003,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFL006,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFL005,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFL004,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFL001,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFLRM1,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFLGRR,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFLPCM,changeMenuView:a,getIsActive:t}),c.a.createElement(m,{facility:o.UFLLAT,changeMenuView:a,getIsActive:t})))}function f(){return c.a.createElement("div",{className:"notification is-primary"},c.a.createElement("h2",{className:"has-text-centered"},c.a.createElement("strong",null,"Please confirm"," ",c.a.createElement("a",{className:"is-link",href:"http://www.uflib.ufl.edu/ps/hours/"},c.a.createElement("span",{class:"icon"},c.a.createElement("i",{class:"fas fa-calendar"})),"Location Hours")," ","before visiting")))}var d=t(1),E=t.n(d),v=t(3);var h="safe",p="warning",b="danger",y=50,L=80;function g(e){return c.a.createElement("div",{className:"facility-container has-text-centered","data-pct":Math.round(e.percentage)},c.a.createElement("svg",{className:"svg-circle",width:"200",height:"200",viewport:"0 0 100 100",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("circle",{r:90,cx:"100",cy:"100",fill:"transparent",strokeDasharray:565.48,strokeDashoffset:"0"}),c.a.createElement("circle",{className:function(e){var a=function(e){var a=h;return e>y&&e<=L?a=p:e>L&&(a=b),a}(e);return"bar-fill ".concat(a)}(e.percentage),r:90,cx:"100",cy:"100",fill:"transparent",strokeDasharray:565.48,strokeDashoffset:"0",style:function(){return{strokeDashoffset:(a=e.percentage,(100-a)/100*(180*Math.PI))};var a}()})))}function w(e){var a="".concat(e.facility.location_id,"-container");return c.a.createElement("div",{className:"card has-text-centered",id:a},c.a.createElement("div",{className:"card-header has-background-info-light"},c.a.createElement("div",{className:"card-header-title is-centered facility"},e.facility.name)),c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"occupancy-total is-centered"},"Occupancy ",e.current," of ",e.limit),c.a.createElement(g,e),c.a.createElement("div",{className:"content is-centered is-small current-as-of"},"Updated: ",function(e){var a=new Date(Date.parse(e.toString())),t=a.getMinutes();return t=t<10?"0".concat(t):"".concat(t),"".concat(a.toDateString(),", ").concat(a.getHours(),":").concat(t)}(e.current_as_of))))}function N(e){var a=Object(n.useState)(0),t=Object(l.a)(a,2),r=t[0],i=t[1],s=Object(n.useState)(100),o=Object(l.a)(s,2),m=o[0],u=o[1],f=Object(n.useState)(0),d=Object(l.a)(f,2),h=d[0],p=d[1],b=Object(n.useState)(new Date),y=Object(l.a)(b,2),L=y[0],g=y[1],N=e.facility,F=Object(n.useCallback)(Object(v.a)(E.a.mark((function e(){var a,t,n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://library-occupancy.s3.amazonaws.com","/").concat(N.prefix,"/").concat(N.location_id),t={headers:{"Content-Type":"application/json"},mode:"cors"},e.next=4,fetch(a,t);case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)}))),[N]),U=function(e,a){var t=100-(e-a)/e*100;return isNaN(t)&&(t=100),t<0&&(t=0),t>100&&(t=100),t},x=function(e){var a=parseInt(e.toString(),10);return a<0?0:a},_=Object(n.useCallback)(Object(v.a)(E.a.mark((function e(){var a,t,n,c,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return a=e.sent,t=a.occupancy,n=a.occupancy_limit,c=a.current_as_of,r=x(t),e.abrupt("return",{current:r,limit:n,percentage:U(n,r),current_as_of:c});case 8:case"end":return e.stop()}}),e)}))),[F]),M=Object(n.useCallback)(Object(v.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:a=e.sent,i(a.current),u(a.limit),p(a.percentage),g(a.current_as_of);case 7:case"end":return e.stop()}}),e)}))),[_]);return Object(n.useEffect)((function(){M()}),[M]),function(e,a){var t=Object(n.useRef)();Object(n.useEffect)((function(){t.current=e}),[e]),Object(n.useEffect)((function(){if(null!==a){var e=setInterval((function(){t.current()}),a);return function(){return clearInterval(e)}}}),[a])}(Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:case"end":return e.stop()}}),e)}))),6e4),c.a.createElement(w,{facility:N,current:r,limit:m,percentage:h,current_as_of:L})}var F=function(e){return o[e]};function U(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFL002")})),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFL003")})),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFL006")}))),c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFL005")})),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFL004")})),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFL001")}))),c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFLRM1")})),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFLGRR")})),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFLPCM")}))),c.a.createElement("div",{className:"columns"},c.a.createElement("div",{className:"column"}),c.a.createElement("div",{className:"column"},c.a.createElement(N,{facility:F("UFLLAT")})),c.a.createElement("div",{className:"column"})))}function x(e){return c.a.createElement("div",{className:"container"},function(){if("all"===e.location_id)return c.a.createElement(U,null);var a=o[e.location_id];return c.a.createElement(N,{facility:a})}())}function _(){return c.a.createElement("footer",{class:"footer has-text-centered"},c.a.createElement("div",{class:"container"},c.a.createElement("div",{class:"columns"},c.a.createElement("div",{class:"column"},c.a.createElement("a",{href:"http://www.uflib.ufl.edu/"},c.a.createElement("span",{class:"icon"},c.a.createElement("i",{class:"fas fa-home"}),"\xa0"),"Library Home")),c.a.createElement("div",{class:"column"},c.a.createElement("a",{href:"http://www.uflib.ufl.edu/ps/hours/"},c.a.createElement("span",{class:"icon"},c.a.createElement("i",{class:"fas fa-calendar"}),"\xa0"),"Library Hours")))))}function M(){var e=Object(n.useState)("all"),a=Object(l.a)(e,2),t=a[0],r=a[1];return c.a.createElement("div",{id:"app"},c.a.createElement(s,null),c.a.createElement(f,null),c.a.createElement("section",{className:"columns"},c.a.createElement("div",{className:"column is-2"},c.a.createElement("section",{className:"section"},c.a.createElement(u,{location_id:t,setActiveLocation:r}))),c.a.createElement("div",{className:"column is-10"},c.a.createElement("section",{className:"section"},c.a.createElement(x,{location_id:t})))),c.a.createElement(_,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,a,t){e.exports=t(13)}},[[6,1,2]]]);
//# sourceMappingURL=main.7e8c54f7.chunk.js.map